<section class="upload-section" style="padding: 80px 5%; background-color: #1E1E1E;">
    <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 30px;">Add New Wallpaper</h2>
    
    <div class="upload-container" style="max-width: 800px; margin: 0 auto; background-color: #2E2E2E; padding: 30px; border-radius: 10px;">
        <form id="wallpaperUploadForm" action="upload.php" method="POST" enctype="multipart/form-data">
            <div class="form-group" style="margin-bottom: 20px;">
                <label for="wallpaperImage" style="display: block; margin-bottom: 8px; font-weight: 500;">Wallpaper Image</label>
                <input type="file" id="wallpaperImage" name="wallpaperImage" accept="image/*" required 
                       style="width: 100%; padding: 12px; border-radius: 5px; border: 1px solid #444; background-color: #1E1E1E; color: white;">
                <p style="margin-top: 8px; font-size: 0.9rem; color: #aaa;">Recommended size: Minimum 3840Ã—2160 pixels (4K)</p>
            </div>
            
            <div style="text-align: center;">
                <button type="submit" class="btn" style="padding: 12px 30px; background-color: #1DB954; color: white; border: none; border-radius: 30px; font-weight: bold; cursor: pointer;">
                    <i class="fas fa-upload"></i> Upload Wallpaper
                </button>
            </div>
        </form>
        
        <div id="uploadStatus" style="margin-top: 20px; text-align: center; display: none;"></div>
    </div>
</section>
<script>
    document.getElementById('wallpaperUploadForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const form = e.target;
    const statusElement = document.getElementById('uploadStatus');
    const formData = new FormData(form);
    
    showStatus('Uploading wallpaper...', 'info');
    
    fetch('upload.php', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showStatus(`
                <div style="background-color: #1E1E1E; padding: 15px; border-radius: 5px; border-left: 4px solid #1DB954;">
                    <i class="fas fa-check-circle" style="color: #1DB954;"></i>
                    <span style="margin-left: 10px;">${data.message}</span>
                    <div style="margin-top: 15px;">
                        <img src="wallpapers/${data.filename}" style="max-width: 100%; max-height: 200px; border-radius: 5px;">
                    </div>
                    <div style="margin-top: 10px;">
                        <button onclick="this.parentElement.parentElement.style.display='none'" class="btn" style="padding: 8px 15px; font-size: 0.9rem;">
                            Close
                        </button>
                    </div>
                </div>
            `, 'success');
            form.reset();
        } else {
            showStatus(data.message, 'error');
        }
    })
    .catch(error => {
        showStatus('An error occurred during upload.', 'error');
        console.error('Error:', error);
    });
});

function showStatus(message, type) {
    const statusElement = document.getElementById('uploadStatus');
    statusElement.style.display = 'block';
    
    let icon = '';
    let color = '#1DB954';
    
    if (type === 'error') {
        icon = '<i class="fas fa-exclamation-circle" style="color: #ff3333;"></i>';
        color = '#ff3333';
    } else if (type === 'info') {
        icon = '<i class="fas fa-info-circle" style="color: #1DB954;"></i>';
    } else {
        icon = '<i class="fas fa-check-circle" style="color: #1DB954;"></i>';
    }
    
    if (type !== 'success') {
        statusElement.innerHTML = `
            <div style="background-color: #1E1E1E; padding: 15px; border-radius: 5px; border-left: 4px solid ${color};">
                ${icon}
                <span style="margin-left: 10px;">${message}</span>
            </div>
        `;
    } else {
        statusElement.innerHTML = message;
    }
}
</script>